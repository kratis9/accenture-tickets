{"ast":null,"code":"import { client } from \"./api-client\";\nimport { safeStorageGet, safeStorageSet } from \"./storage-client\";\nconst TOKEN_URL = `/atr-gateway/identity-management/api/v1/auth/short-token?useDeflate=true`;\nconst TOKEN_KEY = \"apiToken\";\nconst token = safeStorageGet();\n\nasync function fetchToken() {\n  let token = safeStorageGet(TOKEN_KEY);\n\n  if (token) {\n    return token;\n  } else {\n    const user = {\n      username: \"candidate_test1\",\n      password: \"candidate_test1\",\n      snowEnabled: true\n    };\n    const headers = {\n      method: \"POST\",\n      accept: \"*/*\",\n      \"Content-Type\": \"application/json\"\n    };\n    return client(TOKEN_URL, {\n      method: \"POST\",\n      body: JSON.stringify(user),\n      headers\n    }).then(response => {\n      const value = response.token;\n      safeStorageSet(TOKEN_KEY, value);\n      return response.token;\n    });\n  }\n}\n\nexport { fetchToken, token };","map":{"version":3,"sources":["/Users/kratichauhan/tickets-app/src/utils/auth-provider.ts"],"names":["client","safeStorageGet","safeStorageSet","TOKEN_URL","TOKEN_KEY","token","fetchToken","user","username","password","snowEnabled","headers","method","accept","body","JSON","stringify","then","response","value"],"mappings":"AAAA,SAASA,MAAT,QAAuB,cAAvB;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,kBAA/C;AACA,MAAMC,SAAS,GAAI,0EAAnB;AACA,MAAMC,SAAS,GAAG,UAAlB;AACA,MAAMC,KAAK,GAAGJ,cAAc,EAA5B;;AACA,eAAeK,UAAf,GAA6C;AAC3C,MAAID,KAAK,GAAGJ,cAAc,CAACG,SAAD,CAA1B;;AACA,MAAIC,KAAJ,EAAW;AACT,WAAOA,KAAP;AACD,GAFD,MAEO;AACL,UAAME,IAAI,GAAG;AACXC,MAAAA,QAAQ,EAAE,iBADC;AAEXC,MAAAA,QAAQ,EAAE,iBAFC;AAGXC,MAAAA,WAAW,EAAE;AAHF,KAAb;AAKA,UAAMC,OAAoB,GAAG;AAC3BC,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,MAAM,EAAE,KAFmB;AAG3B,sBAAgB;AAHW,KAA7B;AAMA,WAAOb,MAAM,CAACG,SAAD,EAAY;AACvBS,MAAAA,MAAM,EAAE,MADe;AAEvBE,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAFiB;AAGvBI,MAAAA;AAHuB,KAAZ,CAAN,CAIJM,IAJI,CAIEC,QAAD,IAAc;AACpB,YAAMC,KAAK,GAAID,QAAD,CAAkBb,KAAhC;AAEAH,MAAAA,cAAc,CAACE,SAAD,EAAYe,KAAZ,CAAd;AACA,aAAQD,QAAD,CAAkBb,KAAzB;AACD,KATM,CAAP;AAUD;AACF;;AAED,SAASC,UAAT,EAAsBD,KAAtB","sourcesContent":["import { client } from \"./api-client\"\nimport { safeStorageGet, safeStorageSet } from \"./storage-client\"\nconst TOKEN_URL = `/atr-gateway/identity-management/api/v1/auth/short-token?useDeflate=true`\nconst TOKEN_KEY = \"apiToken\"\nconst token = safeStorageGet()\nasync function fetchToken(): Promise<string> {\n  let token = safeStorageGet(TOKEN_KEY)\n  if (token) {\n    return token\n  } else {\n    const user = {\n      username: \"candidate_test1\",\n      password: \"candidate_test1\",\n      snowEnabled: true,\n    }\n    const headers: HeadersInit = {\n      method: \"POST\",\n      accept: \"*/*\",\n      \"Content-Type\": \"application/json\",\n    }\n\n    return client(TOKEN_URL, {\n      method: \"POST\",\n      body: JSON.stringify(user),\n      headers,\n    }).then((response) => {\n      const value = (response as any).token\n\n      safeStorageSet(TOKEN_KEY, value)\n      return (response as any).token as string\n    })\n  }\n}\n\nexport { fetchToken , token}\n"]},"metadata":{},"sourceType":"module"}